<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Dashboard - Regula√ß√£o (SLA e Glosa)</title>
    <link rel="stylesheet" href="../css/regulacao.css"> 
    <script src="https://cdn.jsdelivr.net/npm/chart.js@4.4.0/dist/chart.umd.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/chartjs-plugin-datalabels@2.2.0/dist/chartjs-plugin-datalabels.min.js"></script>
</head>
<body>
    <div class="loading-overlay" id="loading-overlay">
        <div class="loader"></div>
    </div>
    
    <header>
        <div class="container">
            <nav class="main-nav">
                <ul>
                    <li><a href="index.html" class="active">In√≠cio</a></li>
                    <li><a href="auditoria.html">Auditoria</a></li>
                    <li><a href="regulacao.html">Regula√ß√£o</a></li>
                    <li><a href="faturamento.html">Faturamento</a></li>
                    <li><a href="credenciamento.html">Credenciamento</a></li>
                    <li><a href="apresentacao.html">Apresenta√ß√£o</a></li>
                </ul>
            </nav>
            <h1>Dashboard de Regula√ß√£o</h1>
        </div>
    </header>

    <div class="container">
        
        <div class="filters">
            <div class="filter-group">
                <label for="start-date-filter">Data Regula√ß√£o (In√≠cio):</label>
                <input type="date" id="start-date-filter" class="filter-input">
            </div>
            <div class="filter-group">
                <label for="end-date-filter">Data Regula√ß√£o (Fim):</label>
                <input type="date" id="end-date-filter" class="filter-input">
            </div>
            <button class="btn-refresh" id="refresh-btn">üîÑ Atualizar</button>
            <button class="btn-export" id="export-btn">‚¨áÔ∏è Exportar CSV (Glosas)</button>
        </div>
        
        <h2 class="section-title-h2">Desempenho (SLA)</h2>
        <div class="metricas-cards">
            <div class="metrica-card bg-azul">
                <h3>Total de Guias (SLA)</h3>
                <div class="metrica-value" id="total-guias-sla">0</div>
            </div>
            <div class="metrica-card bg-rosa">
                <h3>SLA Geral</h3>
                <div class="metrica-value" id="sla-geral-percentual">0,0%</div>
            </div>

        </div>
        
        <h2 class="section-title-h2">An√°lise de Negativas</h2>
        <div class="metricas-cards">
            <div class="metrica-card bg-azul">
                <h3>Total Geral Negado</h3>
                <div class="metrica-value" id="total-negado-geral">R$ 0,00</div>
            </div>
            <div class="metrica-card bg-rosa">
                <h3>M√©dia Negativa / Guia</h3>
                <div class="metrica-value" id="valor-medio-negado">R$ 0,00</div>
            </div>
            <div class="metrica-card bg-amarelo">
                <h3>Guias com Negativa</h3>
                <div class="metrica-value" id="quantidade-guias">0</div>
            </div>
            <div class="metrica-card bg-vermelho">
                <h3>Maior Negativa √önica</h3>
                <div class="metrica-value" id="maior-negativa-unica">R$ 0,00</div>
            </div>
        </div>
        
        <div class="dashboard-grid">
            <div class="card">
                <h3>Top 10 Prestadores Mais Glosados</h3>
                <div id="chart-wrapper-1" class="chart-wrapper chart-wrapper-large">
                    <canvas id="grafico-top-prestadores"></canvas>
                </div>
            </div>
            <div class="card">
                <h3>Distribui√ß√£o por Tipo de Guia (Glosa)</h3>
                <div id="chart-wrapper-2" class="chart-wrapper chart-wrapper-medium">
                    <canvas id="grafico-tipos-guia"></canvas>
                </div>
            </div>
        </div>
        <div class="dashboard-grid">
            <div class="card" style="grid-column: 1 / 3;">
                <h3>Top 10 Procedimentos Negados (Valor)</h3>
                <div id="chart-wrapper-3" class="chart-wrapper chart-wrapper-full">
                    <canvas id="grafico-top-negados"></canvas>
                </div>
            </div>
        </div>

        <div class="results-card">
            <div class="results-header">
                <h3 id="guias-titulo" class="results-title">Guias com Negativa (0 Encontradas)</h3>
                <div class="search-container">
                    <div class="filter-group">
                        <label for="search-guia">Buscar por N¬∫ Guia:</label>
                        <input type="text" id="search-guia" placeholder="N√∫mero da guia..." class="filter-input">
                    </div>
                </div>
            </div>
            <div class="table-container">
                <table class="results-table">
                    <thead>
                        <tr>
                            <th>N¬∫ Guia</th>
                            <th>Prestador</th>
                            <th>Data Regula√ß√£o</th>
                            <th>Total Negado</th>
                            <th>Detalhes</th>
                        </tr>
                    </thead>
                    <tbody id="guias-table-body">
                    </tbody>
                </table>
            </div>
            <div class="pagination-controls" id="pagination-controls">
            </div>
        </div>

        <div class="card" style="grid-column: 1 / 3; margin-top: 40px;">
            <h3 style="color: var(--maida-rosa); font-size: 1.5em;">An√°lise de Desempenho (SLA)</h3>
        </div>
        <br>
        <div class="dashboard-grid">
            <div class="card">
                <h3>1. SLA por Tipo de Guia (%)</h3>
                <div id="chart-wrapper-sla-1" class="chart-wrapper chart-wrapper-medium">
                    <canvas id="grafico-sla-tipo"></canvas>
                </div>
            </div>
            <div class="card">
                <h3>2. Distribui√ß√£o de Volume por Tipo (SLA)</h3>
                <div id="chart-wrapper-sla-2" class="chart-wrapper chart-wrapper-medium">
                    <canvas id="grafico-sla-volume"></canvas>
                </div>
            </div>
        </div>

        <div class="dashboard-grid">
            <div class="card">
                <h3>3. Guias Dentro vs Fora do SLA (Volume)</h3>
                <div id="chart-wrapper-sla-3" class="chart-wrapper chart-wrapper-medium">
                    <canvas id="grafico-sla-comparativo"></canvas>
                </div>
            </div>
            <div class="card">
                <h3>4. Tend√™ncia de SLA (√öltimas 12 Semanas)</h3>
                <div id="chart-wrapper-sla-4" class="chart-wrapper chart-wrapper-medium">
                    <canvas id="grafico-sla-tendencia"></canvas>
                </div>
            </div>
        </div>
        
        <div class="card" style="grid-column: 1 / 3; margin-top: 40px;">
            <h3 style="color: var(--maida-rosa); font-size: 1.5em;">Desempenho por Regulador</h3>
        </div>
        <br>
        <div class="dashboard-grid">
             <div class="card">
                <h3>5. Desempenho (SLA) por Regulador</h3>
                <div id="chart-wrapper-reg-1" class="chart-wrapper chart-wrapper-large">
                    <canvas id="grafico-regulador-sla"></canvas>
                </div>
            </div>
             <div class="card">
                <h3>6. Volume de Guias por Regulador</h3>
                <div id="chart-wrapper-reg-2" class="chart-wrapper chart-wrapper-large">
                    <canvas id="grafico-regulador-volume"></canvas>
                </div>
            </div>
        </div>

        <div id="details-modal" class="modal">
            <div class="modal-content">
                <span class="close-btn">&times;</span>
                <h3 id="modal-guia-titulo" style="border-bottom: none;">Itens Negados</h3>
                <div id="modal-itens-body">
                </div>
            </div>
        </div>

    </div> <script src="../js/regulacao.js"></script>
    <script src="../js/nav.js"></script>
</body>
</html>
